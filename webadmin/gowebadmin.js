var C=Object.defineProperty;var T=(t,e,r)=>e in t?C(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var k=(t,e,r)=>(T(t,typeof e!="symbol"?e+"":e,r),r);var O={"==":(t,e)=>t==e,"!=":(t,e)=>t!=e,"===":(t,e)=>t===e,"!==":(t,e)=>t!==e,"<":(t,e)=>t<e,"<=":(t,e)=>t<=e,">":(t,e)=>t>e,">=":(t,e)=>t>=e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"**":(t,e)=>t**e,"|":(t,e)=>t|e,"^":(t,e)=>t^e,"&":(t,e)=>t&e,in:(t,e)=>t in e,instanceof:(t,e)=>t instanceof e},V={"=":(t,e,r)=>{t[e]=r},"+=":(t,e,r)=>{t[e]+=r},"-=":(t,e,r)=>{t[e]-=r},"*=":(t,e,r)=>{t[e]*=r},"/=":(t,e,r)=>{t[e]/=r},"%=":(t,e,r)=>{t[e]%=r},"**=":(t,e,r)=>{t[e]**=r},"&&=":(t,e,r)=>{t[e]&&=r},"??=":(t,e,r)=>{t[e]??=r},"||=":(t,e,r)=>{t[e]||=r},">>=":(t,e,r)=>{t[e]>>=r},">>>=":(t,e,r)=>{t[e]>>>=r},"<<=":(t,e,r)=>{t[e]<<=r},"&=":(t,e,r)=>{t[e]&=r},"|=":(t,e,r)=>{t[e]|=r},"^=":(t,e,r)=>{t[e]^=r}},M={"||":(t,e)=>t||e,"&&":(t,e)=>t&&e,"??":(t,e)=>t??e},A={"-":t=>-t,"+":t=>+t,"!":t=>!t,"~":t=>~t,typeof:t=>typeof t,void:t=>{},throw:t=>{throw t}},H=(t,e)=>{if(t==="++")return(r,n)=>e?++r[n]:r[n]++;if(t==="--")return(r,n)=>e?--r[n]:r[n]--},v=(t,e)=>{let r=o(t.callee,e);if(t.callee.type==="OptionalMemberExpression"&&r==null)return;let n=[];return t.arguments.map(i=>{i.type==="SpreadElement"?n.push(...o(i,e)):n.push(o(i,e))}),r(...n)},J={NumericLiteral:(t,e)=>t.value,StringLiteral:(t,e)=>t.value,BooleanLiteral:(t,e)=>t.value,NullLiteral:(t,e)=>null,RegExpLiteral:(t,e)=>new RegExp(t.pattern,t.flags),ExpressionStatement:(t,e)=>o(t.expression,e),BinaryExpression:(t,e)=>O[t.operator](o(t.left,e),o(t.right,e)),AssignmentExpression:(t,e)=>{let r=L(t.left,e);V[t.operator](r,t.left.name,o(t.right,e))},LogicalExpression:(t,e)=>M[t.operator](o(t.left,e),o(t.right,e)),UnaryExpression:(t,e)=>A[t.operator](o(t.argument,e)),UpdateExpression:(t,e)=>{let r=L(t.argument,e);H(t.operator,t.prefix)(r,t.argument.name,o(t.argument,e))},ConditionalExpression:(t,e)=>{let r=o(t.test,e),n=o(t.consequent,e),i=o(t.alternate,e);return r?n:i},MemberExpression:(t,e)=>{let r=o(t.object,e),n=t.computed?r[o(t.property,e)]:r[t.property.name];return typeof n=="function"?n.bind(r):n},OptionalMemberExpression:(t,e)=>{let r=o(t.object,e);if(r==null)return;let n=t.computed?r[o(t.property,e)]:r[t.property.name];return typeof n=="function"?n.bind(r):n},ArrayExpression:(t,e)=>{let r=[];return t.elements.map(n=>{n.type==="SpreadElement"?r.push(...o(n,e)):r.push(o(n,e))}),r},ObjectExpression:(t,e)=>t.properties.reduce((r,n)=>({...r,...o(n,e)}),{}),ObjectProperty:(t,e)=>({[o(t.key,e)]:o(t.value,e)}),SpreadElement:(t,e)=>o(t.argument,e),Identifier:(t,e)=>{if(Array.isArray(e)){let r=e.find(n=>t.name in n);return r?r[t.name]:void 0}else if(typeof e=="object")return e[t.name]},ThisExpression:(t,e)=>{if(Array.isArray(e)){let r=e.find(n=>"this"in n);return r?r.this:void 0}else if(typeof e=="object")return e.this},CallExpression:(t,e)=>v(t,e),OptionalCallExpression:(t,e)=>v(t,e),NewExpression:(t,e)=>v(t,e),Directive:(t,e)=>o(t.value,e),DirectiveLiteral:(t,e)=>t.value},L=(t,e)=>{if(Array.isArray(e))return e.length===0?null:e.find(r=>t.name in r)??e[0];if(typeof e=="object")return e},o=(t,e)=>J[t.type](t,e),d=(t,e={},r={})=>{try{return t.map(n=>o(n,e))}catch(n){throw{error:n.message,location:r,ast:t,context:e}}};var g=class{constructor(e,r){this.eventName=e,this.data=r}},x=class{constructor(e,r){this.eventName=e,this.callback=r,this.key=++x.key}},f=x;k(f,"key",0);var y=class{constructor(){this.listeners={}}addEventListener(e,r){let n=new f(e,r);this.listeners[n.eventName]=this.listeners[n.eventName]||{};let i=this.listeners[n.eventName];return i[n.key]=n,n}removeEventListener(e){this.listeners[e.eventName]&&delete this.listeners[e.eventName][e.key]}dispatchEvent(e,r=null){this.listeners[e]&&Object.values(this.listeners[e]).forEach(n=>{setTimeout(()=>{n.callback.call(void 0,new g(e,r))})})}};globalThis.leanweb=globalThis.leanweb??{componentsListeningOnUrlChanges:[],eventBus:new y,updateComponents(...t){t?.length?t.forEach(e=>{leanweb.eventBus.dispatchEvent(e)}):leanweb.eventBus.dispatchEvent("update")},set urlHash(t){location.hash=t},get urlHash(){return location.hash},set urlHashPath(t){let e=this.urlHash.split("?");e.length===1?this.urlHash=t:e.length>1&&(this.urlHash=t+"?"+e[1])},get urlHashPath(){return this.urlHash.split("?")[0]},set urlHashParams(t){if(!t)return;let e=[];Object.keys(t).forEach(r=>{let n=t[r];Array.isArray(n)?n.forEach(i=>{e.push(r+"="+encodeURIComponent(i))}):e.push(r+"="+encodeURIComponent(n))}),this.urlHash=this.urlHashPath+"?"+e.join("&")},get urlHashParams(){let t={},e=this.urlHash.split("?");return e.length>1&&new URLSearchParams(e[1]).forEach((n,i)=>{t[i]===void 0?t[i]=n:Array.isArray(t[i])?t[i].push(n):t[i]=[t[i],n]}),t}};globalThis.addEventListener("hashchange",()=>{leanweb.componentsListeningOnUrlChanges.forEach(t=>{setTimeout(()=>{t?.urlHashChanged?.call(t),t?.update?.call(t)})})},!1);var I=(t,e)=>{let r=Object.getOwnPropertyDescriptor(t,e);return!!r&&typeof r.value=="function"},P=(t,e)=>{let r=[];for(;t=t.nextSibling;)t.nodeType===Node.ELEMENT_NODE&&(!e||t.matches(e))&&r.push(t);return r},h=class extends HTMLElement{constructor(e){super(),this.ast=e,leanweb.runtimeVersion=e.runtimeVersion,leanweb.builderVersion=e.builderVersion;let r=document.createElement("template");r.innerHTML=`<style>${e.css}</style>${e.html}`,this.attachShadow({mode:"open"}).appendChild(r.content),this._bindMethods(),setTimeout(()=>{this.update(this.shadowRoot),setTimeout(()=>{this.domReady?.call(this)})}),this.urlHashChanged&&typeof this.urlHashChanged=="function"&&leanweb.componentsListeningOnUrlChanges.push(this),leanweb.eventBus.addEventListener("update",n=>{this.update()}),leanweb.eventBus.addEventListener(e.componentFullName,n=>{this.update()})}_getNodeContext(e){return e.closest("[lw-context]")?.["lw-context"]??[{this:this},this,globalThis]}update(e=this.shadowRoot){e!==this.shadowRoot&&e.hasAttribute("lw-elem")&&(e.hasAttribute("lw-elem-bind")&&(this._bindModels(e),this._bindEvents(e),this._bindInputs(e)),e.hasAttribute("lw-if")&&this.updateIf(e),e.hasAttribute("lw-false")||(this.updateEval(e),this.updateClass(e),this.updateBind(e),this.updateModel(e),e.hasAttribute("lw-for")&&this.updateFor(e)));let r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{if(n.hasAttribute("lw-elem")){if(n.hasAttribute("lw-for"))return this.updateFor(n),NodeFilter.FILTER_REJECT;if(n.hasAttribute("lw-for-parent")||(n.hasAttribute("lw-elem-bind")&&(this._bindModels(n),this._bindEvents(n),this._bindInputs(n)),n.hasAttribute("lw-if")&&this.updateIf(n),n.hasAttribute("lw-false")))return NodeFilter.FILTER_REJECT;this.updateEval(n),this.updateClass(n),this.updateBind(n),this.updateModel(n)}return NodeFilter.FILTER_ACCEPT}});for(;r.nextNode(););}_bindMethods(){let e=["update"],r=Object.getPrototypeOf(this);e.push(...Object.getOwnPropertyNames(r).filter(n=>I(r,n))),e.push(...Object.getOwnPropertyNames(this).filter(n=>I(this,n))),e.filter(n=>n!=="constructor").forEach(n=>{this[n]=this[n].bind(this)})}_bindInputs(e){if(!e.lw_input_bound){e.lw_input_bound=!0;for(let r of e.attributes){let n=r.name,i=r.value;if(n.startsWith("lw-input:")){let a=this.ast[i],s=this._getNodeContext(e),l=d(a.ast,s,a.loc);e[a.lwValue]=l[0]}}e?.inputReady?.call(this),e?.update?.call(this)}}_bindEvents(e){if(e.lw_event_bound)return;e.lw_event_bound=!0;let r=this;for(let n of e.attributes){let i=n.name,a=n.value;if(i.startsWith("lw-on:")){let s=this.ast[a];s.lwValue.split(",").forEach(l=>{e.addEventListener(l.trim(),(p=>{let u=this._getNodeContext(e),c={$event:p,$node:e},m=d(s.ast,[c,...u],s.loc),S=m.filter(b=>typeof b?.then=="function"&&typeof b?.finally=="function");m.length>S.length&&r.update(),S.forEach(b=>{b?.finally(()=>{r.update()})})}).bind(r))})}}}_bindModels(e){let r=e.getAttribute("lw-model");if(!r||e.lw_model_bound)return;e.lw_model_bound=!0;let n=this.ast[r];e.addEventListener("input",(i=>{let a=this._getNodeContext(e),s=n.ast[0].expression,l,p;if(s.type==="MemberExpression"?(p=s.computed?d([s.property],a,n.loc)[0]:s.property.name,l=d([s.object],a,n.loc)[0]):s.type==="Identifier"&&(l=this,p=s.name),e.type==="number"||e.type==="range")e.do_not_update=!0,l[p]=e.value*1;else if(e.type==="checkbox")if(Array.isArray(l[p]))if(e.checked)l[p].push(e.value);else{let u=l[p].indexOf(e.value);u>-1&&l[p].splice(u,1)}else l[p]=e.checked;else if(e.type==="select-multiple"){Array.isArray(l[p])||(l[p]=[]),l[p].length=0;for(let u=0;u<e.options.length;++u){let c=e.options[u];c.selected&&l[p].push(c.value)}}else l[p]=e.value;this.update(),delete e.do_not_update}).bind(this))}updateModel(e){if(e.do_not_update&&e.type==="number")return;let r=e.getAttribute("lw-model");if(!r)return;let n=this._getNodeContext(e),i=this.ast[r],a=d(i.ast,n,i.loc);if(e.type==="checkbox")Array.isArray(a[0])?e.checked=a[0].includes?.(e.value):e.checked=!!a[0];else if(e.type==="radio")e.checked=a[0]===e.value;else if(e.type==="select-multiple")for(let s=0;s<e.options.length;++s){let l=e.options[s];a[0]&&(l.selected=a[0].includes(l.value))}else{let s=a[0]??"";e.value!==s&&(e.value=s)}}updateEval(e){let r=e.getAttribute("lw");if(!r)return;let n=this._getNodeContext(e),i=this.ast[r],a=d(i.ast,n,i.loc);(e["lw-eval-value-"+r]!==a[0]||typeof a[0]=="object")&&(e["lw-eval-value-"+r]=a[0],e.innerText=a[0]??"")}updateIf(e){let r=e.getAttribute("lw-if");if(!r)return;let n=this._getNodeContext(e),i=this.ast[r],a=d(i.ast,n,i.loc),s=e.hasAttribute("lw-false");a[0]!==!1&&a[0]!==void 0&&a[0]!==null?(s&&e.removeAttribute("lw-false"),setTimeout(()=>{e.turnedOn?.call(e)})):(!s&&e.setAttribute("lw-false",""),setTimeout(()=>{e.turnedOff?.call(e)}))}updateClass(e){let r=this._getNodeContext(e);for(let n of e.attributes){let i=n.name,a=n.value;if(i.startsWith("lw-class:")){let s=this.ast[a];d(s.ast,r,s.loc)[0]?e.classList.add(s.lwValue):e.classList.remove(s.lwValue)}}}updateBind(e){let r=this._getNodeContext(e);for(let n of e.attributes){let i=n.name,a=n.value;if(i.startsWith("lw-bind:")){let s=this.ast[a],l=d(s.ast,r,s.loc);l[0]!==!1&&l[0]!==void 0&&l[0]!==null?e.setAttribute(s.lwValue,l[0]):e.removeAttribute(s.lwValue)}}}updateFor(e){let r=e.getAttribute("lw-for");if(!r)return;let n=this._getNodeContext(e),i=this.ast[r],a=d(i.astItems,n,i.loc)[0]??[],s=P(e,`[lw-for-parent="${r}"]`);for(let p=a.length;p<s.length;++p)s[p].remove();let l=e;a.forEach((p,u)=>{let c;s.length>u?c=s[u]:(c=e.cloneNode(!0),c.removeAttribute("lw-for"),c.setAttribute("lw-for-parent",r),c.setAttribute("lw-context",""),l.insertAdjacentElement("afterend",c)),p&&typeof p=="object"&&(p.getDom=()=>c),l=c;let m={[i.itemExpr]:p};i.indexExpr&&(m[i.indexExpr]=u),c["lw-context"]=[m,...n],this.update(c)})}};var _={2:{ast:[{type:"ExpressionStatement",expression:{type:"UnaryExpression",operator:"!",prefix:!0,argument:{type:"CallExpression",callee:{type:"MemberExpression",object:{type:"MemberExpression",object:{type:"Identifier",name:"leanweb"},computed:!1,property:{type:"Identifier",name:"urlHashPath"}},computed:!1,property:{type:"Identifier",name:"startsWith"}},arguments:[{type:"StringLiteral",extra:{rawValue:"#/login",raw:"'#/login'"},value:"#/login"}]}}}],loc:{startLine:1,endLine:1}},5:{astItems:[{type:"ExpressionStatement",expression:{type:"Identifier",name:"servers"}}],loc:{startLine:1,endLine:1},itemExpr:"server",itemsExpr:"servers"},11:{ast:[{type:"ExpressionStatement",expression:{type:"MemberExpression",object:{type:"Identifier",name:"server"},computed:!1,property:{type:"Identifier",name:"name"}}}],loc:{startLine:1,endLine:1}},12:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"updateServerJSON"},arguments:[{type:"Identifier",name:"server"}]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"input"},18:{ast:[{type:"ExpressionStatement",expression:{type:"MemberExpression",object:{type:"Identifier",name:"server"},computed:!1,property:{type:"Identifier",name:"listen"}}}],loc:{startLine:1,endLine:1}},19:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"updateServerJSON"},arguments:[{type:"Identifier",name:"server"}]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"input"},22:{ast:[{type:"ExpressionStatement",expression:{type:"MemberExpression",object:{type:"Identifier",name:"server"},computed:!1,property:{type:"Identifier",name:"type"}}}],loc:{startLine:1,endLine:1}},23:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"update"},arguments:[]}},{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"updateServerJSON"},arguments:[{type:"Identifier",name:"server"}]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"input"},28:{ast:[{type:"ExpressionStatement",expression:{type:"MemberExpression",object:{type:"Identifier",name:"server"},computed:!1,property:{type:"Identifier",name:"disabled"}}}],loc:{startLine:1,endLine:1}},29:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"updateServerJSON"},arguments:[{type:"Identifier",name:"server"}]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"input"},31:{astItems:[{type:"ExpressionStatement",expression:{type:"MemberExpression",object:{type:"Identifier",name:"server"},computed:!1,property:{type:"Identifier",name:"hosts"}}}],loc:{startLine:1,endLine:1},itemExpr:"host",itemsExpr:"server.hosts"},33:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"toggleHostHeader"},arguments:[{type:"Identifier",name:"host"}]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"click"},34:{ast:[{type:"ExpressionStatement",expression:{type:"MemberExpression",object:{type:"Identifier",name:"host"},computed:!1,property:{type:"Identifier",name:"uiActive"}}}],loc:{startLine:1,endLine:1},lwType:"lw-class",lwValue:"active"},36:{ast:[{type:"ExpressionStatement",expression:{type:"MemberExpression",object:{type:"Identifier",name:"host"},computed:!1,property:{type:"Identifier",name:"name"}}}],loc:{startLine:1,endLine:1}},44:{ast:[{type:"ExpressionStatement",expression:{type:"MemberExpression",object:{type:"Identifier",name:"host"},computed:!1,property:{type:"Identifier",name:"name"}}}],loc:{startLine:1,endLine:1}},45:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"updateServerJSON"},arguments:[{type:"Identifier",name:"server"}]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"input"},47:{ast:[{type:"ExpressionStatement",expression:{type:"LogicalExpression",left:{type:"BinaryExpression",left:{type:"MemberExpression",object:{type:"Identifier",name:"server"},computed:!1,property:{type:"Identifier",name:"type"}},operator:"===",right:{type:"StringLiteral",extra:{rawValue:"http",raw:"'http'"},value:"http"}},operator:"||",right:{type:"BinaryExpression",left:{type:"MemberExpression",object:{type:"Identifier",name:"server"},computed:!1,property:{type:"Identifier",name:"type"}},operator:"===",right:{type:"StringLiteral",extra:{rawValue:"https",raw:"'https'"},value:"https"}}}}],loc:{startLine:1,endLine:1}},49:{ast:[{type:"ExpressionStatement",expression:{type:"MemberExpression",object:{type:"Identifier",name:"host"},computed:!1,property:{type:"Identifier",name:"type"}}}],loc:{startLine:1,endLine:1}},50:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"update"},arguments:[]}},{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"updateServerJSON"},arguments:[{type:"Identifier",name:"server"}]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"input"},52:{ast:[{type:"ExpressionStatement",expression:{type:"LogicalExpression",left:{type:"LogicalExpression",left:{type:"BinaryExpression",left:{type:"MemberExpression",object:{type:"Identifier",name:"server"},computed:!1,property:{type:"Identifier",name:"type"}},operator:"===",right:{type:"StringLiteral",extra:{rawValue:"http",raw:"'http'"},value:"http"}},operator:"||",right:{type:"BinaryExpression",left:{type:"MemberExpression",object:{type:"Identifier",name:"server"},computed:!1,property:{type:"Identifier",name:"type"}},operator:"===",right:{type:"StringLiteral",extra:{rawValue:"https",raw:"'https'"},value:"https"}},extra:{parenthesized:!0,parenStart:0}},operator:"&&",right:{type:"BinaryExpression",left:{type:"MemberExpression",object:{type:"Identifier",name:"host"},computed:!1,property:{type:"Identifier",name:"type"}},operator:"===",right:{type:"StringLiteral",extra:{rawValue:"serve_static",raw:"'serve_static'"},value:"serve_static"}}}}],loc:{startLine:1,endLine:1}},57:{ast:[{type:"ExpressionStatement",expression:{type:"MemberExpression",object:{type:"Identifier",name:"host"},computed:!1,property:{type:"Identifier",name:"path"}}}],loc:{startLine:1,endLine:1}},58:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"updateServerJSON"},arguments:[{type:"Identifier",name:"server"}]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"input"},60:{ast:[{type:"ExpressionStatement",expression:{type:"LogicalExpression",left:{type:"LogicalExpression",left:{type:"BinaryExpression",left:{type:"MemberExpression",object:{type:"Identifier",name:"server"},computed:!1,property:{type:"Identifier",name:"type"}},operator:"===",right:{type:"StringLiteral",extra:{rawValue:"http",raw:"'http'"},value:"http"}},operator:"||",right:{type:"BinaryExpression",left:{type:"MemberExpression",object:{type:"Identifier",name:"server"},computed:!1,property:{type:"Identifier",name:"type"}},operator:"===",right:{type:"StringLiteral",extra:{rawValue:"https",raw:"'https'"},value:"https"}},extra:{parenthesized:!0,parenStart:0}},operator:"&&",right:{type:"BinaryExpression",left:{type:"MemberExpression",object:{type:"Identifier",name:"host"},computed:!1,property:{type:"Identifier",name:"type"}},operator:"===",right:{type:"StringLiteral",extra:{rawValue:"301_redirect",raw:"'301_redirect'"},value:"301_redirect"}}}}],loc:{startLine:1,endLine:1}},65:{ast:[{type:"ExpressionStatement",expression:{type:"MemberExpression",object:{type:"Identifier",name:"host"},computed:!1,property:{type:"Identifier",name:"redirect_url"}}}],loc:{startLine:1,endLine:1}},66:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"updateServerJSON"},arguments:[{type:"Identifier",name:"server"}]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"input"},68:{ast:[{type:"ExpressionStatement",expression:{type:"LogicalExpression",left:{type:"LogicalExpression",left:{type:"BinaryExpression",left:{type:"MemberExpression",object:{type:"Identifier",name:"server"},computed:!1,property:{type:"Identifier",name:"type"}},operator:"===",right:{type:"StringLiteral",extra:{rawValue:"http",raw:"'http'"},value:"http"}},operator:"||",right:{type:"BinaryExpression",left:{type:"MemberExpression",object:{type:"Identifier",name:"server"},computed:!1,property:{type:"Identifier",name:"type"}},operator:"===",right:{type:"StringLiteral",extra:{rawValue:"https",raw:"'https'"},value:"https"}},extra:{parenthesized:!0,parenStart:0}},operator:"&&",right:{type:"BinaryExpression",left:{type:"MemberExpression",object:{type:"Identifier",name:"host"},computed:!1,property:{type:"Identifier",name:"type"}},operator:"===",right:{type:"StringLiteral",extra:{rawValue:"reverse_proxy",raw:"'reverse_proxy'"},value:"reverse_proxy"}}}}],loc:{startLine:1,endLine:1}},73:{ast:[{type:"ExpressionStatement",expression:{type:"MemberExpression",object:{type:"Identifier",name:"host"},computed:!1,property:{type:"Identifier",name:"forward_urls"}}}],loc:{startLine:1,endLine:1}},74:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"updateServerJSON"},arguments:[{type:"Identifier",name:"server"}]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"input"},76:{ast:[{type:"ExpressionStatement",expression:{type:"BinaryExpression",left:{type:"MemberExpression",object:{type:"Identifier",name:"server"},computed:!1,property:{type:"Identifier",name:"type"}},operator:"===",right:{type:"StringLiteral",extra:{rawValue:"tcp",raw:"'tcp'"},value:"tcp"}}}],loc:{startLine:1,endLine:1}},81:{ast:[{type:"ExpressionStatement",expression:{type:"MemberExpression",object:{type:"Identifier",name:"host"},computed:!1,property:{type:"Identifier",name:"upstream"}}}],loc:{startLine:1,endLine:1}},82:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"updateServerJSON"},arguments:[{type:"Identifier",name:"server"}]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"input"},84:{ast:[{type:"ExpressionStatement",expression:{type:"BinaryExpression",left:{type:"MemberExpression",object:{type:"Identifier",name:"server"},computed:!1,property:{type:"Identifier",name:"type"}},operator:"===",right:{type:"StringLiteral",extra:{rawValue:"https",raw:"'https'"},value:"https"}}}],loc:{startLine:1,endLine:1}},89:{ast:[{type:"ExpressionStatement",expression:{type:"MemberExpression",object:{type:"Identifier",name:"host"},computed:!1,property:{type:"Identifier",name:"key_path"}}}],loc:{startLine:1,endLine:1}},90:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"updateServerJSON"},arguments:[{type:"Identifier",name:"server"}]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"input"},92:{ast:[{type:"ExpressionStatement",expression:{type:"BinaryExpression",left:{type:"MemberExpression",object:{type:"Identifier",name:"server"},computed:!1,property:{type:"Identifier",name:"type"}},operator:"===",right:{type:"StringLiteral",extra:{rawValue:"https",raw:"'https'"},value:"https"}}}],loc:{startLine:1,endLine:1}},97:{ast:[{type:"ExpressionStatement",expression:{type:"MemberExpression",object:{type:"Identifier",name:"host"},computed:!1,property:{type:"Identifier",name:"cert_path"}}}],loc:{startLine:1,endLine:1}},98:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"updateServerJSON"},arguments:[{type:"Identifier",name:"server"}]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"input"},100:{ast:[{type:"ExpressionStatement",expression:{type:"LogicalExpression",left:{type:"LogicalExpression",left:{type:"BinaryExpression",left:{type:"MemberExpression",object:{type:"Identifier",name:"server"},computed:!1,property:{type:"Identifier",name:"type"}},operator:"===",right:{type:"StringLiteral",extra:{rawValue:"http",raw:"'http'"},value:"http"}},operator:"||",right:{type:"BinaryExpression",left:{type:"MemberExpression",object:{type:"Identifier",name:"server"},computed:!1,property:{type:"Identifier",name:"type"}},operator:"===",right:{type:"StringLiteral",extra:{rawValue:"https",raw:"'https'"},value:"https"}},extra:{parenthesized:!0,parenStart:0}},operator:"&&",right:{type:"BinaryExpression",left:{type:"MemberExpression",object:{type:"Identifier",name:"host"},computed:!1,property:{type:"Identifier",name:"type"}},operator:"===",right:{type:"StringLiteral",extra:{rawValue:"serve_static",raw:"'serve_static'"},value:"serve_static"}}}}],loc:{startLine:1,endLine:1}},104:{ast:[{type:"ExpressionStatement",expression:{type:"MemberExpression",object:{type:"Identifier",name:"host"},computed:!1,property:{type:"Identifier",name:"disable_dir_listing"}}}],loc:{startLine:1,endLine:1}},105:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"updateServerJSON"},arguments:[{type:"Identifier",name:"server"}]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"input"},110:{ast:[{type:"ExpressionStatement",expression:{type:"MemberExpression",object:{type:"Identifier",name:"host"},computed:!1,property:{type:"Identifier",name:"disabled"}}}],loc:{startLine:1,endLine:1}},111:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"updateServerJSON"},arguments:[{type:"Identifier",name:"server"}]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"input"},113:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"deleteHost"},arguments:[{type:"Identifier",name:"host"},{type:"Identifier",name:"server"}]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"click"},115:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"openHost"},arguments:[{type:"Identifier",name:"host"},{type:"Identifier",name:"server"}]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"click"},118:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"newHost"},arguments:[{type:"Identifier",name:"server"}]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"click"},120:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"applyServer"},arguments:[{type:"Identifier",name:"server"}]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"click"},122:{ast:[{type:"ExpressionStatement",expression:{type:"MemberExpression",object:{type:"Identifier",name:"server"},computed:!1,property:{type:"Identifier",name:"applyingServer"}}}],loc:{startLine:1,endLine:1},lwType:"lw-class",lwValue:"loading"},123:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"deleteServer"},arguments:[{type:"Identifier",name:"server"}]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"click"},125:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"toggleServerJSON"},arguments:[{type:"Identifier",name:"server"}]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"click"},128:{ast:[{type:"ExpressionStatement",expression:{type:"MemberExpression",object:{type:"Identifier",name:"server"},computed:!1,property:{type:"Identifier",name:"showConfigEditor"}}}],loc:{startLine:1,endLine:1}},131:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"newServer"},arguments:[]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"click"},133:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"applyServers"},arguments:[]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"click"},135:{ast:[{type:"ExpressionStatement",expression:{type:"Identifier",name:"applyingServers"}}],loc:{startLine:1,endLine:1},lwType:"lw-class",lwValue:"loading"},136:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"saveServers"},arguments:[]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"click"},138:{ast:[{type:"ExpressionStatement",expression:{type:"Identifier",name:"savingServers"}}],loc:{startLine:1,endLine:1},lwType:"lw-class",lwValue:"loading"},139:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"toggleServersJSON"},arguments:[]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"click"},141:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"logout"},arguments:[]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"click"},144:{ast:[{type:"ExpressionStatement",expression:{type:"Identifier",name:"showConfigEditor"}}],loc:{startLine:1,endLine:1}},147:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"MemberExpression",object:{type:"MemberExpression",object:{type:"Identifier",name:"leanweb"},computed:!1,property:{type:"Identifier",name:"urlHashPath"}},computed:!1,property:{type:"Identifier",name:"startsWith"}},arguments:[{type:"StringLiteral",extra:{rawValue:"#/login",raw:"'#/login'"},value:"#/login"}]}}],loc:{startLine:1,endLine:1}},152:{ast:[{type:"ExpressionStatement",expression:{type:"Identifier",name:"loginToken"}}],loc:{startLine:1,endLine:1}},153:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"loginByEnter"},arguments:[{type:"Identifier",name:"$event"}]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"keyup"},155:{ast:[{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"login"},arguments:[]}}],loc:{startLine:1,endLine:1},lwType:"lw-on",lwValue:"click"},html:'<div class="server-container" lw-if="2" lw-elem=""><div class="servers"><div class="server-block ppwui card" lw-for="5" lw-elem=""><div class="input-set"><span class="input-label">Server Name:</span> <input type="text" class="ppwui input small" placeholder="Server Name" lw-model="11" lw-on:input="12" lw-elem-bind="" lw-elem="" lw-elem-bind="" lw-elem=""></div><div class="input-set"><div class="input-label">Listen on:</div><input type="text" class="ppwui input small" placeholder="[::]:1234" lw-model="18" lw-on:input="19" lw-elem-bind="" lw-elem="" lw-elem-bind="" lw-elem=""></div><div class="input-set"><div class="input-label">Server Type:</div><select lw-model="22" lw-on:input="23" lw-elem-bind="" lw-elem="" lw-elem-bind="" lw-elem=""><option>https</option><option>http</option><option>tcp</option></select></div><div class="input-set"><div class="input-label">Disabled:</div><input type="checkbox" placeholder="Disabled" lw-model="28" lw-on:input="29" lw-elem-bind="" lw-elem="" lw-elem-bind="" lw-elem=""></div><div class="host-block ppwui card" lw-for="31" lw-elem=""><div class="host-header" lw-on:click="33" lw-class:active="34" lw-elem-bind="" lw-elem="" lw-elem=""><span class="host-header-label" lw="36" lw-elem=""></span></div><div class="host-panel"><div class="host-panel-container"><div class="input-set"><div class="input-label">Host Name:</div><input type="text" class="ppwui input small" placeholder="example.com" lw-model="44" lw-on:input="45" lw-elem-bind="" lw-elem="" lw-elem-bind="" lw-elem=""></div><div class="input-set" lw-if="47" lw-elem=""><div class="input-label">Host Type:</div><select lw-model="49" lw-on:input="50" lw-elem-bind="" lw-elem="" lw-elem-bind="" lw-elem=""><option>serve_static</option><option>301_redirect</option><option>reverse_proxy</option></select></div><div class="input-set" lw-if="52" lw-elem=""><div class="input-label">Web Root Path:</div><input type="text" class="ppwui input small" placeholder="/path/to/webroot" lw-model="57" lw-on:input="58" lw-elem-bind="" lw-elem="" lw-elem-bind="" lw-elem=""></div><div class="input-set" lw-if="60" lw-elem=""><div class="input-label">Redirect URL:</div><input type="text" class="ppwui input small" placeholder="https://example.com" lw-model="65" lw-on:input="66" lw-elem-bind="" lw-elem="" lw-elem-bind="" lw-elem=""></div><div class="input-set" lw-if="68" lw-elem=""><div class="input-label">Forward URLs:</div><input type="text" class="ppwui input small" placeholder="http://server1 http://server2" lw-model="73" lw-on:input="74" lw-elem-bind="" lw-elem="" lw-elem-bind="" lw-elem=""></div><div class="input-set" lw-if="76" lw-elem=""><div class="input-label">Upstream:</div><input type="text" class="ppwui input small" placeholder="[::]:1234" lw-model="81" lw-on:input="82" lw-elem-bind="" lw-elem="" lw-elem-bind="" lw-elem=""></div><div class="input-set" lw-if="84" lw-elem=""><div class="input-label">Key Path:</div><input type="text" class="ppwui input small" placeholder="/path/to/keyfile" lw-model="89" lw-on:input="90" lw-elem-bind="" lw-elem="" lw-elem-bind="" lw-elem=""></div><div class="input-set" lw-if="92" lw-elem=""><div class="input-label">Cert Path:</div><input type="text" class="ppwui input small" placeholder="/path/to/certfile" lw-model="97" lw-on:input="98" lw-elem-bind="" lw-elem="" lw-elem-bind="" lw-elem=""></div><div class="input-set" lw-if="100" lw-elem=""><div class="input-label">Disable Listing:</div><input type="checkbox" placeholder="Disable Dir Listing" lw-model="104" lw-on:input="105" lw-elem-bind="" lw-elem="" lw-elem-bind="" lw-elem=""></div><div class="input-set"><div class="input-label">Disabled:</div><input type="checkbox" placeholder="Disabled" lw-model="110" lw-on:input="111" lw-elem-bind="" lw-elem="" lw-elem-bind="" lw-elem=""></div><div class="button-block"><button lw-on:click="113" class="ppwui button danger small" lw-elem-bind="" lw-elem="">Delete</button> <button lw-on:click="115" class="ppwui button small" lw-elem-bind="" lw-elem="">Open Host</button></div></div></div></div><div class="button-block"><button lw-on:click="118" class="ppwui button primary small" lw-elem-bind="" lw-elem="">New Host</button> <button lw-on:click="120" class="ppwui button small warning" lw-class:loading="122" lw-elem-bind="" lw-elem="" lw-elem="">Apply</button> <button lw-on:click="123" class="ppwui button danger small" lw-elem-bind="" lw-elem="">Delete</button> <button lw-on:click="125" class="ppwui button small" lw-elem-bind="" lw-elem="">JSON</button></div><div class="ppwui card server-json-panel" lw-if="128" lw-elem=""><div class="server-json"></div></div></div><div class="button-block"><button lw-on:click="131" class="ppwui button primary small" lw-elem-bind="" lw-elem="">New Server</button> <button lw-on:click="133" class="ppwui button small warning" lw-class:loading="135" lw-elem-bind="" lw-elem="" lw-elem="">Apply</button> <button lw-on:click="136" class="ppwui button small warning" lw-class:loading="138" lw-elem-bind="" lw-elem="" lw-elem="">Save</button> <button lw-on:click="139" class="ppwui button small" lw-elem-bind="" lw-elem="">JSON</button> <button lw-on:click="141" class="ppwui button small" lw-elem-bind="" lw-elem="">Logout</button></div><div class="ppwui card servers-json-panel" lw-if="144" lw-elem=""><div class="servers-json"></div></div></div></div><div class="login-container" lw-if="147" lw-elem=""><div class="token-input-set"><input type="text" class="ppwui input" placeholder="Please enter access token" lw-model="152" lw-on:keyup="153" lw-elem-bind="" lw-elem="" lw-elem-bind="" lw-elem=""> <button class="ppwui button primary" lw-on:click="155" lw-elem-bind="" lw-elem="">Login</button></div></div>',css:'.ppwui{box-sizing:border-box;appearance:none;--primary-darker:hsl(27, 34%, 43%);--primary-dark:hsl(27, 34%, 50%);--primary:hsl(27, 34%, 57%);--black:hsl(0, 0%, 4%);--black-light:hsl(0, 0%, 7%);--black-lighter:hsl(0, 0%, 14%);--grey-darker:hsl(0, 0%, 21%);--grey-dark:hsl(0, 0%, 29%);--grey:hsl(0, 0%, 48%);--grey-light:hsl(0, 0%, 71%);--grey-lighter:hsl(0, 0%, 86%);--grey-lightest:hsl(0, 0%, 93%);--white-darker:hsl(0, 0%, 96%);--white-dark:hsl(0, 0%, 98%);--white:hsl(0, 0%, 100%);--yellow-darker:hsl(44, 100%, 49%);--yellow-dark:hsl(44, 100%, 63%);--yellow:hsl(44, 100%, 77%);--green-darker:hsl(153, 53%, 39%);--green-dark:hsl(153, 53%, 46%);--green:hsl(153, 53%, 53%);--blue-darker:hsl(229, 53%, 39%);--blue-dark:hsl(229, 53%, 46%);--blue:hsl(229, 53%, 53%);--red-darker:hsl(348, 86%, 40%);--red-dark:hsl(348, 86%, 47%);--red:hsl(348, 86%, 61%);--size-1:3rem;--size-2:2.5rem;--size-3:2rem;--size-4:1.5rem;--size-5:1.25rem;--size-6:1rem;--size-7:0.75rem}.ppwui::after,.ppwui::before{box-sizing:border-box}@keyframes spinAround{from{transform:rotate(0)}to{transform:rotate(359deg)}}.ppwui .block:not(:last-child){margin-bottom:1.5rem}.ppwui.button{background-color:var(--white);color:#363636;border:1px solid #dbdbdb;cursor:pointer;justify-content:center;text-align:center;white-space:nowrap;align-items:center;display:inline-flex;font-size:1rem;height:2.5em;line-height:1.5;padding:calc(.5em - 1px) 1em;position:relative;user-select:none;border-radius:2px;outline:0}.ppwui.button:hover:enabled{border-color:#b5b5b5;background-color:var(--white-dark)}.ppwui.button:active:enabled{background-color:var(--white-darker)}.ppwui.button:disabled{opacity:.5;cursor:not-allowed}.ppwui.button.success{background-color:var(--green);color:var(--white);border-color:transparent}.ppwui.button.success:hover:enabled{background-color:var(--green-dark);border-color:transparent}.ppwui.button.success:active:enabled{background-color:var(--green-darker);border-color:transparent}.ppwui.button.warning{background-color:var(--yellow);color:#363636;border-color:transparent}.ppwui.button.warning:hover:enabled{background-color:var(--yellow-dark);border-color:transparent}.ppwui.button.warning:active:enabled{background-color:var(--yellow-darker);border-color:transparent}.ppwui.button.danger{background-color:var(--red);color:var(--white);border-color:transparent}.ppwui.button.danger:hover:enabled{background-color:var(--red-dark);border-color:transparent}.ppwui.button.danger:active:enabled{background-color:var(--red-darker);border-color:transparent}.ppwui.button.info{background-color:var(--blue);color:var(--white);border-color:transparent}.ppwui.button.info:hover:enabled{background-color:var(--blue-dark);border-color:transparent}.ppwui.button.info:active:enabled{background-color:var(--blue-darker);border-color:transparent}.ppwui.button.primary{background-color:var(--primary);color:var(--white);border-color:transparent}.ppwui.button.primary:hover:enabled{background-color:var(--primary-dark);border-color:transparent}.ppwui.button.primary:active:enabled{background-color:var(--primary-darker);border-color:transparent}.ppwui.button.small{font-size:.75em}.ppwui.button.medium{font-size:1.25em}.ppwui.button.large{font-size:1.5em}.ppwui.button.loading{pointer-events:none;color:transparent!important;opacity:.8}.ppwui.button.loading::after{animation:spinAround 750ms infinite linear;border:2px solid #dbdbdb;border-radius:9999px;border-right-color:transparent;border-top-color:transparent;content:"";display:block;width:1em;height:1em;position:absolute!important;left:calc(50% - .5em);top:calc(50% - .5em)}.ppwui.button.loading.danger::after,.ppwui.button.loading.info::after,.ppwui.button.loading.primary::after,.ppwui.button.loading.success::after{border-color:transparent transparent var(--white) var(--white)!important}.ppwui.button.loading.warning::after{border-color:transparent transparent rgba(0,0,0,.7) rgba(0,0,0,.7)!important}.ppwui.button.link{border-color:transparent!important;background-color:transparent}.ppwui.button.link:hover:enabled{background-color:var(--grey-lightest)}.ppwui.button.link:active:enabled{background-color:var(--grey-lighter)}.ppwui.button.link:disabled{opacity:.5;cursor:not-allowed}.ppwui.button.link.primary{color:var(--primary)}.ppwui.button.link.success{color:var(--green)}.ppwui.button.link.info{color:var(--blue)}.ppwui.button.link.danger{color:var(--red)}.ppwui.button.link.warning{color:var(--yellow)}.ppwui.card{position:relative;background-color:#fff;background-clip:border-box;border:1px solid rgba(0,0,0,.125);border-radius:.25rem}.ppwui.close{user-select:none;background-color:rgba(10,10,10,.2);border:none;border-radius:9999px;cursor:pointer;pointer-events:auto;display:inline-block;flex-grow:0;flex-shrink:0;font-size:0;height:20px;max-height:20px;max-width:20px;min-height:20px;min-width:20px;outline:0;position:relative;vertical-align:top;width:20px}.ppwui.close:hover{background-color:rgba(10,10,10,.3)}.ppwui.close:active{background-color:rgba(10,10,10,.4)}.ppwui.close::before{height:2px;width:50%;background-color:#fff;content:"";display:block;left:50%;position:absolute;top:50%;transform:translateX(-50%) translateY(-50%) rotate(45deg);transform-origin:center center}.ppwui.close::after{height:50%;width:2px;background-color:#fff;content:"";display:block;left:50%;position:absolute;top:50%;transform:translateX(-50%) translateY(-50%) rotate(45deg);transform-origin:center center}.ppwui.close.small{height:16px;max-height:16px;max-width:16px;min-height:16px;min-width:16px;width:16px}.ppwui.close.medium{height:24px;max-height:24px;max-width:24px;min-height:24px;min-width:24px;width:24px}.ppwui.close.large{height:32px;max-height:32px;max-width:32px;min-height:32px;min-width:32px;width:32px}.ppwui.input{margin:0;align-items:center;border:1px solid transparent;display:inline-flex;font-size:1rem;height:2.5em;justify-content:flex-start;line-height:1.5;padding-bottom:calc(.5em - 1px);padding-left:calc(.75em - 1px);padding-right:calc(.75em - 1px);padding-top:calc(.5em - 1px);position:relative;vertical-align:top;background-color:#fff;border-color:#dbdbdb;border-radius:2px;color:#363636;box-shadow:inset 0 .0625em .125em rgba(10,10,10,.05);max-width:100%;width:100%}.ppwui.input:hover{border-color:#b5b5b5}.ppwui.input:focus{border-color:var(--blue);box-shadow:0 0 0 0 rgba(50,115,220,.25);outline:0}.ppwui.input::placeholder{color:#dbdbdb}.ppwui.input:disabled{background-color:#f5f5f5;border-color:#f5f5f5;box-shadow:none;color:#7a7a7a;cursor:not-allowed}.ppwui.input.success{border-color:var(--green)}.ppwui.input.success:hover{border-color:var(--green-dark)}.ppwui.input.success:focus{border-color:var(--green-darker)}.ppwui.input.warning{border-color:var(--yellow)}.ppwui.input.warning:hover{border-color:var(--yellow-dark)}.ppwui.input.warning:focus{border-color:var(--yellow-darker)}.ppwui.input.danger{border-color:var(--red)}.ppwui.input.danger:hover{border-color:var(--red-dark)}.ppwui.input.danger:focus{border-color:var(--red-darker)}.ppwui.input.info{border-color:var(--blue)}.ppwui.input.info:hover{border-color:var(--blue-dark)}.ppwui.input.info:focus{border-color:var(--blue-darker)}.ppwui.input.primary{border-color:var(--primary)}.ppwui.input.primary:hover{border-color:var(--primary-dark)}.ppwui.input.primary:focus{border-color:var(--primary-darker)}.ppwui.input.small{font-size:.75em}.ppwui.input.medium{font-size:1.25em}.ppwui.input.large{font-size:1.5em}.server-container{display:flex;justify-content:center}.server-container .servers{width:800px;padding-bottom:20px}.server-container .servers .server-block{padding:1.25rem;margin:25px;position:relative;background-color:var(--white-dark)}.server-container .servers .server-block .input-set{height:30px;display:flex;align-items:center;margin-bottom:10px}.server-container .servers .server-block .input-set .input-label{flex:0 0 120px;font-size:11pt}.server-container .servers .server-block .host-block{margin:5px 0;background-color:var(--grey-lightest)}.server-container .servers .server-block .host-block .host-header{padding:.8rem 1.25rem;cursor:pointer;font-weight:500;transition:.4s}.server-container .servers .server-block .host-block .host-header.active,.server-container .servers .server-block .host-block .host-header:hover{background-color:var(--grey-lighter)}.server-container .servers .server-block .host-block .host-header:after{content:"+";font-size:13px;color:#777;float:right;margin-left:5px}.server-container .servers .server-block .host-block .host-header.active:after{content:"-"}.server-container .servers .server-block .host-block .host-panel{max-height:0;overflow:hidden;transition:max-height .2s ease-out}.server-container .servers .server-block .host-block .host-panel .host-panel-container{padding:1.25rem}.server-container .servers .button-block{display:flex;justify-content:center;gap:15px;margin-top:15px}.server-container .servers .button-block button{width:100px}.server-container .servers .server-json-panel{margin:1.25rem 0}.server-container .servers .servers-json-panel{margin:1.25rem}.login-container{display:flex;justify-content:center;align-items:center;height:100%}.login-container .token-input-set{display:flex;width:400px}[lw-false],[lw-for]{display:none!important}',componentFullName:"gowebadmin-root",runtimeVersion:"2.0.5",builderVersion:"2.0.5"};var j={apiUrl:"http://127.0.0.1:2022"};var E=class{constructor(e,r=!1,n={}){this.baesUrl=e,this.sendToken=r,this.defaultHeaders=n}async _fetch(e,r="",n={},i={}){if(!r.toLowerCase().startsWith("https://")&&!r.toLowerCase().startsWith("http://")&&(r=this.baesUrl+r),e==="GET"&&n&&typeof n=="object"){let s=D(n);n=null,r.endsWith("?")?r+=s:r.indexOf("?")>=0?r+="&"+s:r+="?"+s}if(this.sendToken){let s=sessionStorage.getItem("access_token")??localStorage.getItem("access_token");s&&(i.authorization=s)}let a=await fetch(r,{method:e,headers:{...this.defaultHeaders,...i},body:n?JSON.stringify(n):null});return a.status===401?leanweb?.onAuthFailed():a.status===200&&leanweb.urlHashPath.startsWith("#/login")&&(leanweb.urlHashPath="#/",leanweb.urlHashParams={}),a}post(e,r,n){return this._fetch("POST",e,r,n)}get(e,r,n){return this._fetch("GET",e,r,n)}patch(e,r,n){return this._fetch("PATCH",e,r,n)}delete(e,r,n){return this._fetch("DELETE",e,r,n)}put(e,r,n){return this._fetch("PUT",e,r,n)}options(e,r,n){return this._fetch("OPTIONS",e,r,n)}},D=t=>Object.keys(t).map(e=>{let r=t[e];return Array.isArray(r)?r.reduce((n,i)=>`${n}${e}=${encodeURIComponent(i)}&`,""):`${e}=${encodeURIComponent(r)}&`}).reduce((e,r)=>e+r,"").slice(0,-1),w=new E(j.apiUrl,!0);customElements.define("gowebadmin-root",class extends h{constructor(){super(_),leanweb.onAuthFailed=this.logout,this.setUrlToken()}async domReady(){sessionStorage.getItem("access_token")?await this.loadServers():this.logout()}async loadServers(){let t=await w.get("/api/servers/");t&&(this.servers=await t.json(),this.update())}getNewHost(){return{type:"serve_static",uiActive:!0}}newHost(t){t.hosts??=[];let e=this.getNewHost();t.hosts.push(e),setTimeout(()=>{this.updateServerJSON(t);let r=e.getDom().querySelector(".host-panel");r.style.maxHeight="1000px"})}deleteHost(t,e){let r=e.hosts.findIndex(n=>n===t);e.hosts.splice(r,1),this.updateServerJSON(e)}openHost(t,e){window.open(`${e.type}://${t.name}`,"_blank")}newServer(){this.servers??=[];let t={name:"New Server",type:"https",listen:"[::]:443"};this.servers.push(t),this.newHost(t)}async applyServer(t){t.applyingServer=!0,this.update();let e=this.getServerJSONData(t,!0),r=await w.post("/api/server/",e);if(!r){t.applyingServer=!1;return}let n=await r.json();n.err&&alert(n.err),setTimeout(()=>{t.applyingServer=!1,this.update()},250)}deleteServer(t){let e=this.servers.findIndex(r=>r===t);this.servers.splice(e,1),this.updateServerJSON(t)}updateServerJSON(t){t.configEditor||(t.configEditor=ace.edit(t.getDom().querySelector(".server-json"),{mode:"ace/mode/json",theme:"ace/theme/chrome",maxLines:1/0,showPrintMargin:!1,showGutter:!1,readOnly:!0}),t.configEditor.renderer.attachToShadowRoot()),t.configEditor.setValue(JSON.stringify(this.getServerJSONData(t),null,2),1),this.updateServersJSON()}toggleServerJSON(t){this.updateServerJSON(t),t.showConfigEditor=!t.showConfigEditor}async applyServers(){this.applyingServers=!0,this.update();let t=this.servers.map(n=>this.getServerJSONData(n,!0)),e=await w.patch("/api/servers/",t);if(!e){this.applyingServers=!1;return}let r=await e.json();r.err&&alert(r.err),setTimeout(()=>{this.applyingServers=!1,this.update()},250)}async saveServers(){this.savingServers=!0,this.update();let t=this.servers.map(n=>this.getServerJSONData(n)),e=await w.post("/api/servers/",t);if(!e){this.savingServers=!1,this.update();return}let r=await e.json();r.err&&alert(r.err),setTimeout(()=>{this.savingServers=!1,this.update()},250)}updateServersJSON(){this.configEditor||(this.configEditor=ace.edit(this.shadowRoot.querySelector(".servers-json"),{mode:"ace/mode/json",theme:"ace/theme/chrome",maxLines:1/0,showPrintMargin:!1,showGutter:!1,readOnly:!0}),this.configEditor.renderer.attachToShadowRoot());let t=this.servers.map(e=>this.getServerJSONData(e));this.configEditor.setValue(JSON.stringify(t,null,2),1)}toggleServersJSON(){this.updateServersJSON(),this.showConfigEditor=!this.showConfigEditor}toggleHostHeader(t){let e=t.getDom().querySelector(".host-panel");e.style.maxHeight?(e.style.maxHeight=null,t.uiActive=!1):(e.style.maxHeight="1000px",t.uiActive=!0)}getServerJSONData(t){let e={};return e.name=t.name,e.type=t.type,e.listen=t.listen,e.disabled=t.disabled,e.hosts=t.hosts.map(r=>{let n={};return n.name=r.name,t.type==="http"||t.type==="https"?(n.type=r.type,r.type==="serve_static"?(n.path=r.path,n.disable_dir_listing=r.disable_dir_listing):r.type==="301_redirect"?n.redirect_url=r.redirect_url:r.type==="reverse_proxy"&&(n.forward_urls=r.forward_urls),t.type==="https"&&(n.cert_path=r.cert_path,n.key_path=r.key_path)):t.type==="tcp"&&(n.upstream=r.upstream),n.disabled=r.disabled,n}),e}async loginByEnter(t){t?.key==="Enter"&&await this.login()}async login(){sessionStorage.setItem("access_token",this.loginToken),this.loginToken="",leanweb.urlHashPath="#/",leanweb.urlHashParams={},await this.loadServers()}logout(){sessionStorage.removeItem("access_token"),leanweb.urlHashPath="#/login",leanweb.urlHashParams={},this.update()}async urlHashChanged(){this.setUrlToken()&&await this.loadServers()}setUrlToken(){let t=leanweb.urlHashParams.access_token;if(t)return sessionStorage.setItem("access_token",t),t}});
//# sourceMappingURL=gowebadmin.js.map
